<div class="big-container" style="background-image: url(<%= cl_image_path('https://res.cloudinary.com/dtjuz4kkr/image/upload/v1686840960/blurr_azumrg.png') %>);">
  <div class="inner-container1 bg-white shadow d-flex flex-column align-items-center">
    <!-- Contenu du premier conteneur -->
    <%= cl_image_tag('https://res.cloudinary.com/dtjuz4kkr/image/upload/v1686851125/animetrek_logo_fnexfu.png', class: 'logo-image') %>
    <img src="<%= @user.photo %>" alt="User Photo" class="mt-5 mb-5 rounded-circle" width="120" height="120">
    <nav class="nav flex-column mt-2">
      <%= link_to "Home", root_path, class: "nav-link active mt-2 mb-2 rounded-pill border text-center", style: "color: black;" %>
      <%= link_to "Categories", search_path, class: "nav-link mb-2 mt-2 rounded-pill border", style: "color: black;" %>
    </nav>
    <%= image_tag('character.png', alt: 'Character Image', class: 'mt-auto', width: 200) %>
  </div>

  <div class="inner-container2 bg-white shadow ml-5">
    <!-- Contenu du deuxiÃ¨me conteneur -->
    <div class="cardfirst ml-5 mt-5">
      <div class="card-body text-center">
        <h2>Hi, <%= @user.username %> ðŸ‘‹</h2>
        <p>Welcome to your Dashboard! Here you can view your watchlist and manage your anime collection.</p>
      </div>
    </div>

    <div class="d-flex justify-content-center">
      <div class="cardsecond">
        <div class="card-body">
          <div class="container" style="height: 100vh;">
            <div class="inner-container" style="display: flex; flex-direction: column;">
              <ul class="nav nav-tabs justify-content-start" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true" style="color: black;">Watchlist</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false" style="color: black;">Profile</button>
                </li>
                <!--<li class="nav-item" role="presentation">
                  <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab" aria-controls="contact" aria-selected="false">Contact</button>
                </li>-->
              </ul>
              <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                  <div class="animes-container">
                    <div class="genre-section">
                      <h4 class="genre-title mt-5 mb-2">Watchlist - <%= pluralize @user.watchlists.count, "result" %></h4>
                    </div>
                    <div class="animesCd" style="overflow-x: auto; white-space: nowrap; padding-bottom: 20px;">
                      <% @user.watchlists.each do |watchlist| %>
                        <div class="card-anime d-inline-block mr-1" style="width: 200px;">
                          <div class="image-card">
                            <%= image_tag watchlist.anime.image %>
                          </div>
                          <div class="info-anime">
                            <h2 style="font-size: 18px; width: 100%; overflow: hidden; text-overflow: ellipsis;"><%= watchlist.anime.title %></h2>
                            <small style="font-size: 12px;"> (<%= watchlist.anime.date_start %>)</small>
                            <p style="font-size: 12px;"><%= watchlist.anime.themes.join(", ") %></p>
                          </div>
                        </div>
                      <% end %>
                    </div>
                  </div>
                </div>
                <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                  <div class="d-flex flex-column align-items-center mt-5">
                    <img src="<%= @user.photo %>" alt="User Photo" class="mt-3 mb-5 rounded-circle" width="50" height="50">
                    <h2>Username: <%= @user.username %></h2>
                    <p>Email: <%= @user.email %></p>
                    <p>Points: <%= @user.points %></p>
                    <p>Bio: <%= @user.bio %></p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .big-container {
    display: flex;
    height: 100vh;
    justify-content: center;
    align-items: center;
  }

  .container {
    display: flex;
    flex-direction: row;
  }

  .inner-container1 {
    flex: 0 0 15%;
    justify-content: flex-start; /* Espacement Ã  droite */
    margin-left: 70px;
    margin-top: 100px;
    margin-bottom: 100px;
    border-radius: 20px;
    height: 800px;
  }

  .inner-container2 {
    flex: 1;
    width: 70%;
    margin-left: 70px;
    margin-top: 100px;
    margin-bottom: 100px;
    border-radius: 20px;
    margin-right: 70px;
    height: 800px;
    overflow-x: auto;
    white-space: nowrap;
  }

  .logo-image {
    width: 200px;
    height: 47px;
    margin-top: 100px;
  }

  .custom-card-image {
    width: 50px;
    height: 50px;
  }

  .card-anime {
    margin-right: 1px;
    margin-bottom: 10px;
  }
</style>
